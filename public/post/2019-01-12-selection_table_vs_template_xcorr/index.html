<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>Compare signals from selection tables to a set of templates using cross-correlation - Coded bioacoustics</title>

  <meta name="description" content="I got the following question about cross-correlation:
&ldquo;We would like to compare every call within a selection table to a template of each owl, and get peak correlation coefficients on each call separately&rdquo;
One way to do this would be putting the unidentified and template signals together into a single selection table, and then running cross-correlation. However, this will also compare all unidentified signals against each other, which can be very inefficient."><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Coded bioacoustics",
    
    "url": "marce10.github.io\/coded_bioacustics\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "marce10.github.io\/coded_bioacustics\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "marce10.github.io\/coded_bioacustics\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "marce10.github.io\/coded_bioacustics\/post\/2019-01-12-selection_table_vs_template_xcorr\/",
          "name": "Compare signals from selection tables to a set of templates using cross correlation"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : ""
  },
  "headline": "Compare signals from selection tables to a set of templates using cross-correlation",
  "description" : "I got the following question about cross-correlation:\n\u0026ldquo;We would like to compare every call within a selection table to a template of each owl, and get peak correlation coefficients on each call separately\u0026rdquo;\nOne way to do this would be putting the unidentified and template signals together into a single selection table, and then running cross-correlation. However, this will also compare all unidentified signals against each other, which can be very inefficient.",
  "inLanguage" : "en",
  "wordCount":  797 ,
  "datePublished" : "0001-01-01T00:00:00",
  "dateModified" : "0001-01-01T00:00:00",
  "image" : "marce10.github.io\/coded_bioacustics\/img\/blog_sticker_v2.png",
  "keywords" : [ "" ],
  "mainEntityOfPage" : "marce10.github.io\/coded_bioacustics\/post\/2019-01-12-selection_table_vs_template_xcorr\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "marce10.github.io\/coded_bioacustics\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "marce10.github.io\/coded_bioacustics\/img\/blog_sticker_v2.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Compare signals from selection tables to a set of templates using cross-correlation" />
<meta property="og:description" content="I got the following question about cross-correlation:
&ldquo;We would like to compare every call within a selection table to a template of each owl, and get peak correlation coefficients on each call separately&rdquo;
One way to do this would be putting the unidentified and template signals together into a single selection table, and then running cross-correlation. However, this will also compare all unidentified signals against each other, which can be very inefficient.">
<meta property="og:image" content="marce10.github.io/coded_bioacustics/img/blog_sticker_v2.png" />
<meta property="og:url" content="marce10.github.io/coded_bioacustics/marce10.github.io/coded_bioacustics/post/2019-01-12-selection_table_vs_template_xcorr/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Coded bioacoustics" />

  <meta name="twitter:title" content="Compare signals from selection tables to a set of templates using …" />
  <meta name="twitter:description" content="I got the following question about cross-correlation:
&ldquo;We would like to compare every call within a selection table to a template of each owl, and get peak correlation coefficients on each call …">
  <meta name="twitter:image" content="marce10.github.io/coded_bioacustics/img/blog_sticker_v2.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@Marcelo_Araya_Salas" />
  <meta name="twitter:creator" content="@Marcelo_Araya_Salas" />
  <link href='marce10.github.io/coded_bioacustics/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.121.2">
  <link rel="alternate" href="marce10.github.io/coded_bioacustics/index.xml" type="application/rss+xml" title="Coded bioacoustics"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous"><link rel="stylesheet" href="marce10.github.io/coded_bioacustics/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="marce10.github.io/coded_bioacustics/css/highlight.min.css" /><link rel="stylesheet" href="marce10.github.io/coded_bioacustics/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


<script async src="https://www.googletagmanager.com/gtag/js?id=G-RZVLSR0L9P"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-RZVLSR0L9P', { 'anonymize_ip': false });
}
</script>

  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="marce10.github.io/coded_bioacustics/">Coded bioacoustics</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/marce10.github.io/coded_bioacustics/">Blog</a>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent">Samples</a>
              <div class="navlinks-children">
                
                  <a href="/marce10.github.io/coded_bioacustics/post/2017-03-07-bigimg-sample">Big Image Sample</a>
                
                  <a href="/marce10.github.io/coded_bioacustics/post/2017-03-05-math-sample">Math Sample</a>
                
                  <a href="/marce10.github.io/coded_bioacustics/post/2016-03-08-code-sample">Code Sample</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="About" href="/marce10.github.io/coded_bioacustics/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/marce10.github.io/coded_bioacustics/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Coded bioacoustics" href="marce10.github.io/coded_bioacustics/">
            <img class="avatar-img" src="marce10.github.io/coded_bioacustics/img/blog_sticker_v2.png" alt="Coded bioacoustics" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Compare signals from selection tables to a set of templates using cross-correlation</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on January 1, 0001
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;4&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;797&nbsp;words
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>I got the following question about cross-correlation:</p>
<blockquote>
<p>&ldquo;We would like to compare every call within a selection table to a template of each owl, and get peak correlation coefficients on each call separately&rdquo;</p>
</blockquote>
<p>One way to do this would be putting the unidentified and template signals together into a single selection table, and then running cross-correlation. However, this will also compare all unidentified signals against each other, which can be very inefficient. A better way would be running a loop that compares each row in a selection table to the set of template songs and then put the results back into the selection table. This post shows how to do exactly that.</p>
<p>First set up the example data and global options:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># load warbleR</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">warbleR</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#load data and save sound files</span>
</span></span><span class="line"><span class="cl"><span class="nf">data</span><span class="p">(</span><span class="s">&#34;Phae.long.est&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># set warbleR global options</span>
</span></span><span class="line"><span class="cl"><span class="c1"># this options can also be set within the function call</span>
</span></span><span class="line"><span class="cl"><span class="nf">warbleR_options</span><span class="p">(</span><span class="n">wl</span> <span class="o">=</span> <span class="m">300</span><span class="p">,</span> <span class="n">pb</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">90</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">12</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">pal</span> <span class="o">=</span> <span class="n">reverse.heat.colors</span><span class="p">)</span>
</span></span></code></pre></div><p>We&rsquo;ll use the example data set from the <a href="https://cran.r-project.org/package=NatureSounds">NatureSounds</a> package. This data has long-billed hermit songs from different song types (see &rsquo;lek.song.type&rsquo; column). Check out the full description of the data <a href="https://marce10.github.io/NatureSounds/reference/Phae.long.est.html">here</a>.</p>
<p>The first step is to create an example selection table for unidentified songs (or calls if working with owl vocalizations) and another one for the template songs. In the following code we get 3 examples for each song type in the (extended) selection table (<em>unk.songs</em>) and 1 of each song type in a template set (<em>tempts</em>):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># get songs to identify</span>
</span></span><span class="line"><span class="cl"><span class="n">unk.songs</span> <span class="o">&lt;-</span> <span class="n">Phae.long.est</span><span class="nf">[c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,</span> <span class="m">11</span><span class="o">:</span><span class="m">13</span><span class="p">,</span> <span class="m">21</span><span class="o">:</span><span class="m">23</span><span class="p">),</span> <span class="n">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># get 3 template songs to compare against</span>
</span></span><span class="line"><span class="cl"><span class="n">tempts</span> <span class="o">&lt;-</span> <span class="n">Phae.long.est</span><span class="nf">[c</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="m">30</span><span class="p">),</span> <span class="n">]</span>
</span></span></code></pre></div><p>We can look at the spectrograms for the 2 sets as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># catalog for unk.songs</span>
</span></span><span class="line"><span class="cl"><span class="nf">catalog</span><span class="p">(</span><span class="n">unk.songs</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">rm.axes</span> <span class="o">=</span> <span class="bp">T</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">11</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">        <span class="n">labels</span> <span class="o">=</span> <span class="s">&#34;lek.song.type&#34;</span><span class="p">)</span>
</span></span></code></pre></div><img src="/./img/calls_catalog.png" title="plot of chunk xcorr templts 2.5" alt="plot of chunk xcorr templts 2.5" width="500px" style="display: block; margin: auto;" />
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># catalog for templates</span>
</span></span><span class="line"><span class="cl"><span class="nf">catalog</span><span class="p">(</span><span class="n">tempts</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">rm.axes</span> <span class="o">=</span> <span class="bp">T</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">11</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">        <span class="n">labels</span> <span class="o">=</span> <span class="s">&#34;lek.song.type&#34;</span><span class="p">)</span>
</span></span></code></pre></div><img src="/./img/templt_catalog.png" title="plot of chunk xcorr templts 3.5" alt="plot of chunk xcorr templts 3.5" width="500px" style="display: block; margin: auto;" />
<p>As you can see the templates have a single example of each of the 3 song types in the &lsquo;unk.songs&rsquo; selection table.</p>
<p>Now we have to create a routine that will compare each row in the &lsquo;unk.songs&rsquo; selection table to each template and put the results in a data frame:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># loop for each row</span>
</span></span><span class="line"><span class="cl"><span class="n">out</span> <span class="o">&lt;-</span> <span class="nf">lapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="nf">nrow</span><span class="p">(</span><span class="n">unk.songs</span><span class="p">),</span> <span class="kr">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># extract each row at the time</span>
</span></span><span class="line"><span class="cl">  <span class="n">X</span> <span class="o">&lt;-</span> <span class="n">unk.songs[x</span><span class="p">,</span> <span class="p">,</span> <span class="n">drop</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="n">]</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># bind the unk.songs and the templates in a single extended selection table</span>
</span></span><span class="line"><span class="cl">  <span class="n">Y</span> <span class="o">&lt;-</span> <span class="nf">rbind</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">tempts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># run cross correlation</span>
</span></span><span class="line"><span class="cl">  <span class="n">xc</span> <span class="o">&lt;-</span> <span class="nf">xcorr</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">pb</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1"># put results into a data frame</span>
</span></span><span class="line"><span class="cl">  <span class="n">Z</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="nf">t</span><span class="p">(</span><span class="nf">round</span><span class="p">(</span><span class="n">xc[</span> <span class="m">-1</span><span class="p">,</span> <span class="m">1</span><span class="n">]</span><span class="p">,</span> <span class="m">3</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># rename columns with xc values</span>
</span></span><span class="line"><span class="cl">  <span class="nf">names</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span><span class="n">[9</span><span class="o">:</span><span class="m">11</span><span class="n">]</span> <span class="o">&lt;-</span> <span class="n">tempts</span><span class="o">$</span><span class="n">lek.song.type</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kr">return</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># put results back into a single data frame</span>
</span></span><span class="line"><span class="cl"><span class="n">xcorr_results</span> <span class="o">&lt;-</span>  <span class="nf">do.call</span><span class="p">(</span><span class="n">rbind</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
</span></span></code></pre></div><p>Let&rsquo;s take a look at the output (excluding irrelevant columns):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">xcorr_results[</span> <span class="p">,</span> <span class="o">-</span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="o">:</span><span class="m">6</span><span class="p">)</span><span class="n">]</span>
</span></span></code></pre></div><div style="border: 1px solid #ddd; padding: 1px;  font-size: 13px; margin-left: auto; margin-right: auto;" class="table table-striped"><table>
 <thead>
  <tr>
   <th style="text-align:center;"> sound.files </th>
   <th style="text-align:center;"> selec </th>
   <th style="text-align:center;"> lek </th>
   <th style="text-align:center;"> lek.song.type </th>
   <th style="text-align:center;"> BR1-D1 </th>
   <th style="text-align:center;"> CCL-G1 </th>
   <th style="text-align:center;"> CCL-K2 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> 0.BR1.2012.7.27.5.55.wav_3-4 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> BR1 </td>
   <td style="text-align:center;"> BR1-D1 </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.693</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.251</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.419</span> </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 0.BR1.2012.7.27.5.55.wav_1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> BR1 </td>
   <td style="text-align:center;"> BR1-D1 </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.702</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.267</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.418</span> </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 0.BR1.2012.7.27.5.55.wav_3-3 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> BR1 </td>
   <td style="text-align:center;"> BR1-D1 </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.701</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.231</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.425</span> </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 0.CCL.2008.4.1.8.27.wav_2-8 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> CCL </td>
   <td style="text-align:center;"> CCL-G1 </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.314</span> </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.752</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.485</span> </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 0.CCL.2008.4.1.8.27.wav_1-10 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> CCL </td>
   <td style="text-align:center;"> CCL-G1 </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.298</span> </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.75</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.462</span> </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 0.CCL.2008.4.1.8.27.wav_2-6 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> CCL </td>
   <td style="text-align:center;"> CCL-G1 </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.313</span> </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.755</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.493</span> </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 43.CCL.2011.6.16.8.19.wav_2 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> CCL </td>
   <td style="text-align:center;"> CCL-K2 </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.471</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.38</span> </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.671</span> </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 43.CCL.2011.6.16.8.19.wav_4 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> CCL </td>
   <td style="text-align:center;"> CCL-K2 </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.446</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.435</span> </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.726</span> </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 31.CCL.2011.6.17.8.45.wav_1-13 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> CCL </td>
   <td style="text-align:center;"> CCL-K2 </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.41</span> </td>
   <td style="text-align:center;"> <span style="     color: black;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white;">0.456</span> </td>
   <td style="text-align:center;"> <span style=" font-weight: bold;    color: white;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red;">0.687</span> </td>
  </tr>
</tbody>
</table></div>
<p>The last 3 columns show the cross-correlation scores for each of the 3 templates, respectively. Note that the highest scores correspond to the templates belonging to the same song type category (highllighted cells).</p>
<p>The code can go faster by using parallel computing. This can be done using the pblapply function (instead of lapply) from the <a href="https://cran.r-project.org/package=NatureSounds">pbapply</a> package setting the argument <code>cl</code>.</p>
<p>Hope that helps!</p>
<p><font size="4">Session information</font></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1">## R version 3.5.1 (2018-07-02)</span>
</span></span><span class="line"><span class="cl"><span class="c1">## Platform: x86_64-pc-linux-gnu (64-bit)</span>
</span></span><span class="line"><span class="cl"><span class="c1">## Running under: Ubuntu 18.10</span>
</span></span><span class="line"><span class="cl"><span class="c1">## </span>
</span></span><span class="line"><span class="cl"><span class="c1">## Matrix products: default</span>
</span></span><span class="line"><span class="cl"><span class="c1">## BLAS: /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3</span>
</span></span><span class="line"><span class="cl"><span class="c1">## LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.3.so</span>
</span></span><span class="line"><span class="cl"><span class="c1">## </span>
</span></span><span class="line"><span class="cl"><span class="c1">## locale:</span>
</span></span><span class="line"><span class="cl"><span class="c1">##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       </span>
</span></span><span class="line"><span class="cl"><span class="c1">## </span>
</span></span><span class="line"><span class="cl"><span class="c1">## attached base packages:</span>
</span></span><span class="line"><span class="cl"><span class="c1">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
</span></span><span class="line"><span class="cl"><span class="c1">## </span>
</span></span><span class="line"><span class="cl"><span class="c1">## other attached packages:</span>
</span></span><span class="line"><span class="cl"><span class="c1">## [1] warbleR_1.1.16     NatureSounds_1.0.1 seewave_2.1.0     </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [4] tuneR_1.3.3        maps_3.3.0         kableExtra_0.9.0  </span>
</span></span><span class="line"><span class="cl"><span class="c1">## </span>
</span></span><span class="line"><span class="cl"><span class="c1">## loaded via a namespace (and not attached):</span>
</span></span><span class="line"><span class="cl"><span class="c1">##  [1] Rcpp_1.0.0        pracma_2.2.2      bindr_0.1.1      </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  [4] highr_0.7         compiler_3.5.1    pillar_1.3.0     </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  [7] bitops_1.0-6      iterators_1.0.10  tools_3.5.1      </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [10] Sim.DiffProc_4.3  digest_0.6.18     viridisLite_0.3.0</span>
</span></span><span class="line"><span class="cl"><span class="c1">## [13] evaluate_0.12     tibble_1.4.2      fftw_1.0-4       </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [16] pkgconfig_2.0.2   rlang_0.3.1       rstudioapi_0.9.0 </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [19] yaml_2.2.0        parallel_3.5.1    bindrcpp_0.2.2   </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [22] dplyr_0.7.6       xml2_1.2.0        httr_1.4.0       </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [25] stringr_1.3.1     knitr_1.20        hms_0.4.2        </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [28] tidyselect_0.2.4  rprojroot_1.3-2   glue_1.3.0       </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [31] R6_2.3.0          dtw_1.20-1        jpeg_0.1-8       </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [34] pbapply_1.3-4     rmarkdown_1.10    soundgen_1.3.2   </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [37] purrr_0.2.5       readr_1.3.1       magrittr_1.5     </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [40] scales_1.0.0      backports_1.1.3   htmltools_0.3.6  </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [43] MASS_7.3-50       assertthat_0.2.0  rvest_0.3.2      </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [46] colorspace_1.3-2  Deriv_3.8.5       stringi_1.2.4    </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [49] proxy_0.4-22      munsell_0.5.0     signal_0.7-6     </span>
</span></span><span class="line"><span class="cl"><span class="c1">## [52] RCurl_1.95-4.11   crayon_1.3.4      rjson_0.2.20</span>
</span></span></code></pre></div>

        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2019-01-12-selection_table_vs_template_xcorr%2f&amp;text=Compare%20signals%20from%20selection%20tables%20to%20a%20set%20of%20templates%20using%20cross-correlation&amp;via=Marcelo_Araya_Salas" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=marce10.github.io%2fcoded_bioacustics%2fpost%2f2019-01-12-selection_table_vs_template_xcorr%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2019-01-12-selection_table_vs_template_xcorr%2f&amp;title=Compare%20signals%20from%20selection%20tables%20to%20a%20set%20of%20templates%20using%20cross-correlation" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2019-01-12-selection_table_vs_template_xcorr%2f&amp;title=Compare%20signals%20from%20selection%20tables%20to%20a%20set%20of%20templates%20using%20cross-correlation" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2019-01-12-selection_table_vs_template_xcorr%2f&amp;title=Compare%20signals%20from%20selection%20tables%20to%20a%20set%20of%20templates%20using%20cross-correlation" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2019-01-12-selection_table_vs_template_xcorr%2f&amp;description=Compare%20signals%20from%20selection%20tables%20to%20a%20set%20of%20templates%20using%20cross-correlation" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="marce10.github.io/coded_bioacustics/post/2016-12-12-create_dynamic_spectro_in_r/" data-toggle="tooltip" data-placement="top" title="Creating dynamic spectrograms (videos)">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="marce10.github.io/coded_bioacustics/post/2020-02-13-barulho/" data-toggle="tooltip" data-placement="top" title="baRulho: an R package to quantify (animal) acoustic signal transmission and degradation">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          
          <div class="disqus-comments">                  
            <button id="show-comments" class="btn btn-default" type="button">Show <span class="disqus-comment-count" data-disqus-url="marce10.github.io/coded_bioacustics/post/2019-01-12-selection_table_vs_template_xcorr">comments</span></button>
            <div id="disqus_thread"></div>

            <script type="text/javascript">
              var disqus_config = function () {
              this.page.url = 'marce10.github.io\/coded_bioacustics\/post\/2019-01-12-selection_table_vs_template_xcorr';
            };

          </script>
          </div>
          
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
		
		  <a href="https://github.com/maRce10" title="GitHub">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://twitter.com/Marcelo_Araya_Salas" title="Twitter">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.youtube.com/@MrBioacoustics" title="Youtube">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="marce10.github.io/coded_bioacustics/">Coded bioacoustics</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.121.2</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="marce10.github.io/coded_bioacustics/js/main.js"></script>
<script src="marce10.github.io/coded_bioacustics/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="marce10.github.io/coded_bioacustics/js/load-photoswipe.js"></script>








<script type="text/javascript">
$(function(){
  $('#show-comments').on('click', function(){
    var disqus_shortname = 'maRce_10';
      
    (function() {
      var disqus = document.createElement('script'); 
      disqus.type = 'text/javascript'; 
      disqus.async = true;
      disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
    })();
      
    $(this).hide(); 
    });
  });
      
</script>
<script id="dsq-count-scr" src="//maRce_10.disqus.com/count.js" async></script>




    
  </body>
</html>

