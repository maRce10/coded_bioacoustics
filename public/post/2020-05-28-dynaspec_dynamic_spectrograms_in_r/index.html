<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>dynaSpec: dynamic spectrograms in R - Coded bioacoustics</title>

  <meta name="description" content="The R package dynaSpec can now be installed from github. This is a set of tools to generate dynamic spectrogram visualizations in video format. It is still on the making and new visualizations will be available soon. FFMPEG must be installed in order for this package to work.
To install dynaSpec from github you will need the R package devtools:
# From github devtools::install_github(&#34;maRce10/dynaSpec&#34;) #load package library(dynaSpec) Installation of external dependencies can be tricky on operating systems other than Linux.">
  <meta name="author" content="Some Person"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Coded bioacoustics",
    
    "url": "marce10.github.io\/coded_bioacustics\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "marce10.github.io\/coded_bioacustics\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "marce10.github.io\/coded_bioacustics\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "marce10.github.io\/coded_bioacustics\/post\/2020-05-28-dynaspec_dynamic_spectrograms_in_r\/",
          "name": "Dyna spec dynamic spectrograms in r"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Marcelo Araya-Salas"
  },
  "headline": "dynaSpec: dynamic spectrograms in R",
  "description" : "The R package dynaSpec can now be installed from github. This is a set of tools to generate dynamic spectrogram visualizations in video format. It is still on the making and new visualizations will be available soon. FFMPEG must be installed in order for this package to work.\nTo install dynaSpec from github you will need the R package devtools:\n# From github devtools::install_github(\u0026#34;maRce10\/dynaSpec\u0026#34;) #load package library(dynaSpec) Installation of external dependencies can be tricky on operating systems other than Linux.",
  "inLanguage" : "en",
  "wordCount":  1921 ,
  "datePublished" : "2020-05-28T00:00:00",
  "dateModified" : "2020-05-28T00:00:00",
  "image" : "marce10.github.io\/coded_bioacustics\/img\/blog_sticker_v2.png",
  "keywords" : [ "video, visualization, R" ],
  "mainEntityOfPage" : "marce10.github.io\/coded_bioacustics\/post\/2020-05-28-dynaspec_dynamic_spectrograms_in_r\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "marce10.github.io\/coded_bioacustics\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "marce10.github.io\/coded_bioacustics\/img\/blog_sticker_v2.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="dynaSpec: dynamic spectrograms in R" />
<meta property="og:description" content="The R package dynaSpec can now be installed from github. This is a set of tools to generate dynamic spectrogram visualizations in video format. It is still on the making and new visualizations will be available soon. FFMPEG must be installed in order for this package to work.
To install dynaSpec from github you will need the R package devtools:
# From github devtools::install_github(&#34;maRce10/dynaSpec&#34;) #load package library(dynaSpec) Installation of external dependencies can be tricky on operating systems other than Linux.">
<meta property="og:image" content="marce10.github.io/coded_bioacustics/img/blog_sticker_v2.png" />
<meta property="og:url" content="marce10.github.io/coded_bioacustics/marce10.github.io/coded_bioacustics/post/2020-05-28-dynaspec_dynamic_spectrograms_in_r/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Coded bioacoustics" />

  <meta name="twitter:title" content="dynaSpec: dynamic spectrograms in R" />
  <meta name="twitter:description" content="The R package dynaSpec can now be installed from github. This is a set of tools to generate dynamic spectrogram visualizations in video format. It is still on the making and new visualizations will be …">
  <meta name="twitter:image" content="marce10.github.io/coded_bioacustics/img/blog_sticker_v2.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@username" />
  <meta name="twitter:creator" content="@username" />
  <link href='marce10.github.io/coded_bioacustics/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.121.2">
  <link rel="alternate" href="marce10.github.io/coded_bioacustics/index.xml" type="application/rss+xml" title="Coded bioacoustics"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous"><link rel="stylesheet" href="marce10.github.io/coded_bioacustics/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="marce10.github.io/coded_bioacustics/css/highlight.min.css" /><link rel="stylesheet" href="marce10.github.io/coded_bioacustics/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


<script async src="https://www.googletagmanager.com/gtag/js?id=G-RZVLSR0L9P"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-RZVLSR0L9P', { 'anonymize_ip': false });
}
</script>

  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="marce10.github.io/coded_bioacustics/">Coded bioacoustics</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/marce10.github.io/coded_bioacustics/">Blog</a>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent">Samples</a>
              <div class="navlinks-children">
                
                  <a href="/marce10.github.io/coded_bioacustics/post/2017-03-07-bigimg-sample">Big Image Sample</a>
                
                  <a href="/marce10.github.io/coded_bioacustics/post/2017-03-05-math-sample">Math Sample</a>
                
                  <a href="/marce10.github.io/coded_bioacustics/post/2016-03-08-code-sample">Code Sample</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="About" href="/marce10.github.io/coded_bioacustics/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/marce10.github.io/coded_bioacustics/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Coded bioacoustics" href="marce10.github.io/coded_bioacustics/">
            <img class="avatar-img" src="marce10.github.io/coded_bioacustics/img/blog_sticker_v2.png" alt="Coded bioacoustics" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>dynaSpec: dynamic spectrograms in R</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on May 28, 2020
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;10&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1921&nbsp;words
  
  
    
      
        &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Marcelo Araya-Salas
      
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>The R package <a href="https://marce10.github.io/dynaSpec">dynaSpec</a> can now be
installed from github. This is a set of tools to generate dynamic
spectrogram visualizations in video format. It is still on the making
and new visualizations will be available soon.
<a href="https://ffmpeg.org/download.html">FFMPEG</a> <strong>must be installed</strong> in
order for this package to work.</p>
<p>To install <a href="https://marce10.github.io/dynaSpec">dynaSpec</a> from
<a href="http://github.com/">github</a> you will need the R package
<a href="https://cran.r-project.org/package=devtools">devtools</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># From github</span>
</span></span><span class="line"><span class="cl"><span class="n">devtools</span><span class="o">::</span><span class="nf">install_github</span><span class="p">(</span><span class="s">&#34;maRce10/dynaSpec&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#load package</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">dynaSpec</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p>Installation of external dependencies can be tricky on operating systems other than Linux. An alternative option is to run the package through <a href="https://colab.google/">google colab</a>. This <a href="https://colab.research.google.com/drive/1t3Wn9OifcZTvxOMVNmz9dF25vnzU3_Fr?usp=sharing">colab notebook</a> explain how to do that step-by-step.</p>
<!-- raw HTML omitted -->
<h2 id="examples">Examples</h2>
<p>To run the following examples you will also need to load a few more
packages:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#load package</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">warbleR</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">viridis</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tuneR</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">seewave</span><span class="p">)</span>
</span></span></code></pre></div><p>The function <code>scrolling_spectro()</code> (the only function so far) creates
‘.mp4’ video files of the spectrogram of an input ‘wave’ object that
moves from right to left. For instance, this is a dynamic spectrogram of
a canyon wren song with a viridis color palette:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">data</span><span class="p">(</span><span class="s">&#34;canyon_wren&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">canyon_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">300</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.7</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">viridis</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">9</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">              <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;default.mp4&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>This is the same clip but with a black and white spectrogram:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">canyon_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">300</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">          <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.7</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">reverse.gray.colors.1</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">          <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">9</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">          <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">          <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;black_and_white.mp4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-100</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">))</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p>  A spectrogram with black background (colbg = “black”):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">canyon_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">300</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.7</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">viridis</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">9</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">              <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;black.mp4&#34;</span><span class="p">,</span> <span class="n">colbg</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>Slow down to 1/2 speed (speed = 0.5) with a oscillogram at the bottom
(osc = TRUE):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">canyon_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">300</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.7</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">viridis</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">9</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">              <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;slow.mp4&#34;</span><span class="p">,</span> <span class="n">colbg</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">speed</span> <span class="o">=</span> <span class="m">0.5</span><span class="p">,</span> <span class="n">osc</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">colwave</span> <span class="o">=</span> <span class="s">&#34;#31688E99&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p> </p>
<p>Long-billed hermit song at 1/5 speed (speed = 0.5), removing axes and
looping 3 times (loop = 3:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">data</span><span class="p">(</span><span class="s">&#34;Phae.long4&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">Phae.long4</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">300</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.7</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">90</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">magma</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">10</span><span class="p">),</span> <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-50</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">    <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;no_axis.mp4&#34;</span><span class="p">,</span> <span class="n">colbg</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">speed</span> <span class="o">=</span> <span class="m">0.2</span><span class="p">,</span> <span class="n">axis.type</span> <span class="o">=</span> <span class="s">&#34;none&#34;</span><span class="p">,</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>Visualizing a northern nightingale wren recording from
<a href="https://www.xeno-canto.org">xeno-canto</a> using a custom color palette:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ngh_wren</span> <span class="o">&lt;-</span> <span class="nf">read_wave</span><span class="p">(</span><span class="s">&#34;https://www.xeno-canto.org/518334/download&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">custom_pal</span> <span class="o">&lt;-</span> <span class="nf">colorRampPalette</span><span class="p">(</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;#2d2d86&#34;</span><span class="p">,</span> <span class="s">&#34;#2d2d86&#34;</span><span class="p">,</span> <span class="nf">reverse.terrain.colors</span><span class="p">(</span><span class="m">10</span><span class="p">)</span><span class="n">[5</span><span class="o">:</span><span class="m">10</span><span class="n">]</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">ngh_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">600</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">t.display</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">custom_pal</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">8</span><span class="p">),</span> <span class="n">width</span> <span class="o">=</span> <span class="m">700</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">height</span> <span class="o">=</span> <span class="m">250</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">100</span><span class="p">,</span> <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-40</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;../nightingale_wren.mp4&#34;</span><span class="p">,</span> <span class="n">colbg</span> <span class="o">=</span> <span class="s">&#34;#2d2d86&#34;</span><span class="p">,</span> <span class="n">lcol</span> <span class="o">=</span> <span class="s">&#34;#FFFFFFE6&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>Spix’s disc-winged bat inquiry call slow down (speed = 0.05):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">data</span><span class="p">(</span><span class="s">&#34;thyroptera.est&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># extract one call</span>
</span></span><span class="line"><span class="cl"><span class="n">thy_wav</span> <span class="o">&lt;-</span> <span class="nf">attributes</span><span class="p">(</span><span class="n">thyroptera.est</span><span class="p">)</span><span class="o">$</span><span class="n">wave.objects[[12]]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># add silence at both &#34;sides&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">thy_wav</span> <span class="o">&lt;-</span> <span class="nf">pastew</span><span class="p">(</span><span class="n">tuneR</span><span class="o">::</span><span class="nf">silence</span><span class="p">(</span><span class="n">duration</span> <span class="o">=</span> <span class="m">0.05</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">            <span class="n">samp.rate</span> <span class="o">=</span> <span class="n">thy_wav</span><span class="o">@</span><span class="n">samp.rate</span><span class="p">,</span> <span class="n">xunit</span> <span class="o">=</span> <span class="s">&#34;time&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">thy_wav</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="s">&#34;Wave&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">thy_wav</span> <span class="o">&lt;-</span> <span class="nf">pastew</span><span class="p">(</span><span class="n">thy_wav</span><span class="p">,</span> <span class="n">tuneR</span><span class="o">::</span><span class="nf">silence</span><span class="p">(</span><span class="n">duration</span> <span class="o">=</span> <span class="m">0.04</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">            <span class="n">samp.rate</span> <span class="o">=</span> <span class="n">thy_wav</span><span class="o">@</span><span class="n">samp.rate</span><span class="p">,</span> <span class="n">xunit</span> <span class="o">=</span> <span class="s">&#34;time&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">output</span> <span class="o">=</span> <span class="s">&#34;Wave&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">thy_wav</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">400</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">t.display</span> <span class="o">=</span> <span class="m">0.08</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">inferno</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">12</span><span class="p">,</span> <span class="m">37</span><span class="p">),</span> <span class="n">width</span> <span class="o">=</span> <span class="m">700</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">height</span> <span class="o">=</span> <span class="m">250</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">100</span><span class="p">,</span> <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-40</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;thyroptera_osc.mp4&#34;</span><span class="p">,</span> <span class="n">colbg</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span> <span class="n">lcol</span> <span class="o">=</span> <span class="s">&#34;#FFFFFFE6&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">speed</span> <span class="o">=</span> <span class="m">0.05</span><span class="p">,</span> <span class="n">fps</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> <span class="n">buffer</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">4</span><span class="p">,</span> <span class="n">lty</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">osc</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">colwave</span> <span class="o">=</span> <span class="nf">inferno</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="m">0.9</span><span class="p">)</span><span class="n">[3]</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<h3 id="further-customization">Further customization</h3>
<p>The argument ‘spectro.call’ allows to insert customized spectrogram
visualizations. For instance, the following code makes use of the
<code>color_spectro()</code> function from
<a href="https://cran.r-project.org/package=warbleR">warbleR</a> to highlight
vocalizations from male and female house wrens with different colors
(after downloading the selection table and sound file from figshare):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># get house wren male female duet recording</span>
</span></span><span class="line"><span class="cl"><span class="n">hs_wren</span> <span class="o">&lt;-</span> <span class="nf">read_wave</span><span class="p">(</span><span class="s">&#34;https://ndownloader.figshare.com/files/22722101&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># and extended selection table</span>
</span></span><span class="line"><span class="cl"><span class="n">st</span> <span class="o">&lt;-</span> <span class="nf">read.csv</span><span class="p">(</span><span class="s">&#34;https://ndownloader.figshare.com/files/22722404&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create color column</span>
</span></span><span class="line"><span class="cl"><span class="n">st</span><span class="o">$</span><span class="n">colors</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;green&#34;</span><span class="p">,</span> <span class="s">&#34;yellow&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># highlight selections</span>
</span></span><span class="line"><span class="cl"><span class="nf">color.spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">13</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">              <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-55</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="n">dB</span> <span class="o">=</span> <span class="s">&#34;B&#34;</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">st</span><span class="p">,</span> <span class="n">col.clm</span> <span class="o">=</span> <span class="s">&#34;colors&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">base.col</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span>  <span class="n">t.mar</span> <span class="o">=</span> <span class="m">0.07</span><span class="p">,</span> <span class="n">f.mar</span> <span class="o">=</span> <span class="m">0.1</span><span class="p">,</span> <span class="n">strength</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">interactive</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">bg.col</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p><img src="https://marce10.github.io/dynaSpec/reference/figures/colored_spectro_house_wren_duet.png" alt="house wren duet"></p>
<p>The male part is shown in green and the female part in yellow.</p>
<p>We can wrap the <code>color_spectro()</code> call using the <code>call()</code> function form
base R and input that into <code>scrolling_spectro()</code> using the argument
‘spectro.call’:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># save call</span>
</span></span><span class="line"><span class="cl"><span class="n">sp_cl</span> <span class="o">&lt;-</span> <span class="nf">call</span><span class="p">(</span><span class="s">&#34;color.spectro&#34;</span><span class="p">,</span> <span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">13</span><span class="p">),</span> <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-55</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="n">strength</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">dB</span> <span class="o">=</span> <span class="s">&#34;B&#34;</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">st</span><span class="p">,</span> <span class="n">col.clm</span> <span class="o">=</span> <span class="s">&#34;colors&#34;</span><span class="p">,</span> <span class="n">base.col</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">              <span class="n">t.mar</span> <span class="o">=</span> <span class="m">0.07</span><span class="p">,</span> <span class="n">f.mar</span> <span class="o">=</span> <span class="m">0.1</span><span class="p">,</span> <span class="n">interactive</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">bg.col</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create dynamic spectrogram</span>
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">512</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">                  <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.2</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">reverse.gray.colors.1</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">13</span><span class="p">),</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-100</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> <span class="n">spectro.call</span> <span class="o">=</span> <span class="n">sp_cl</span><span class="p">,</span> <span class="n">fps</span> <span class="o">=</span> <span class="m">60</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;yellow_and_green.mp4&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>This option can be mixed with any of the other customizations in the
function, as adding an oscillogram:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create dynamic spectrogram</span>
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">512</span><span class="p">,</span> <span class="n">osc</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.2</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">reverse.gray.colors.1</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">13</span><span class="p">),</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-100</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">spectro.call</span> <span class="o">=</span> <span class="n">sp_cl</span><span class="p">,</span> <span class="n">fps</span> <span class="o">=</span> <span class="m">60</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;yellow_and_green_oscillo.mp4&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>A viridis color palette:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">st</span><span class="o">$</span><span class="n">colors</span> <span class="o">&lt;-</span> <span class="nf">viridis</span><span class="p">(</span><span class="m">10</span><span class="p">)</span><span class="nf">[c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">8</span><span class="p">)</span><span class="n">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">sp_cl</span> <span class="o">&lt;-</span> <span class="nf">call</span><span class="p">(</span><span class="s">&#34;color.spectro&#34;</span><span class="p">,</span> <span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">13</span><span class="p">),</span> <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-55</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">              <span class="n">dB</span> <span class="o">=</span> <span class="s">&#34;B&#34;</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">st</span><span class="p">,</span> <span class="n">col.clm</span> <span class="o">=</span> <span class="s">&#34;colors&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">base.col</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">,</span> <span class="n">t.mar</span> <span class="o">=</span> <span class="m">0.07</span><span class="p">,</span> <span class="n">f.mar</span> <span class="o">=</span> <span class="m">0.1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">strength</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">interactive</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create dynamic spectrogram</span>
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> <span class="n">osc</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.2</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">reverse.gray.colors.1</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">13</span><span class="p">),</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-100</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> <span class="n">colwave</span> <span class="o">=</span> <span class="nf">viridis</span><span class="p">(</span><span class="m">10</span><span class="p">)</span><span class="nf">[c</span><span class="p">(</span><span class="m">9</span><span class="p">)</span><span class="n">]</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">spectro.call</span> <span class="o">=</span> <span class="n">sp_cl</span><span class="p">,</span> <span class="n">fps</span> <span class="o">=</span> <span class="m">60</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;viridis.mp4&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>Or simply a gray scale:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">st</span><span class="o">$</span><span class="n">colors</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;gray&#34;</span><span class="p">,</span> <span class="s">&#34;gray49&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">sp_cl</span> <span class="o">&lt;-</span> <span class="nf">call</span><span class="p">(</span><span class="s">&#34;color.spectro&#34;</span><span class="p">,</span> <span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">13</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">              <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-55</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="n">dB</span> <span class="o">=</span> <span class="s">&#34;B&#34;</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">st</span><span class="p">,</span> <span class="n">col.clm</span> <span class="o">=</span> <span class="s">&#34;colors&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">base.col</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">,</span> <span class="n">t.mar</span> <span class="o">=</span> <span class="m">0.07</span><span class="p">,</span> <span class="n">f.mar</span> <span class="o">=</span> <span class="m">0.1</span><span class="p">,</span> <span class="n">strength</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">interactive</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create dynamic spectrogram</span>
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">512</span><span class="p">,</span> <span class="n">osc</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.2</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">reverse.gray.colors.1</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">13</span><span class="p">),</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-100</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">spectro.call</span> <span class="o">=</span> <span class="n">sp_cl</span><span class="p">,</span> <span class="n">fps</span> <span class="o">=</span> <span class="m">60</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;gray.mp4&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>The ‘spectro.call’ argument can also be used to add annotations. To do
this we need to wrap up both the spectrogram function and the annotation
functions (i.e. <code>text()</code>, <code>lines()</code>) in a single function and then save
the call to that function:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create color column</span>
</span></span><span class="line"><span class="cl"><span class="n">st</span><span class="o">$</span><span class="n">colors</span> <span class="o">&lt;-</span> <span class="nf">viridis</span><span class="p">(</span><span class="m">10</span><span class="p">)</span><span class="nf">[c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">8</span><span class="p">)</span><span class="n">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create label column</span>
</span></span><span class="line"><span class="cl"><span class="n">st</span><span class="o">$</span><span class="n">labels</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;male&#34;</span><span class="p">,</span> <span class="s">&#34;female&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># shrink end of second selection (purely aesthetics)</span>
</span></span><span class="line"><span class="cl"><span class="n">st</span><span class="o">$</span><span class="n">end[2]</span> <span class="o">&lt;-</span> <span class="m">3.87</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1"># function to highlight selections</span>
</span></span><span class="line"><span class="cl"><span class="n">ann_fun</span> <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span><span class="n">wave</span><span class="p">,</span> <span class="n">X</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># print spectrogram</span>
</span></span><span class="line"><span class="cl">  <span class="nf">color.spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">wave</span><span class="p">,</span>  <span class="n">wl</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">18.6</span><span class="p">),</span> <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-55</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">              <span class="n">dB</span> <span class="o">=</span> <span class="s">&#34;B&#34;</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="p">,</span> <span class="n">col.clm</span> <span class="o">=</span> <span class="s">&#34;colors&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">base.col</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">,</span> <span class="n">t.mar</span> <span class="o">=</span> <span class="m">0.07</span><span class="p">,</span> <span class="n">f.mar</span> <span class="o">=</span> <span class="m">0.1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">strength</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">interactive</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># annotate each selection in X </span>
</span></span><span class="line"><span class="cl">  <span class="kr">for</span><span class="p">(</span><span class="n">e</span> <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="nf">nrow</span><span class="p">(</span><span class="n">X</span><span class="p">)){</span>  
</span></span><span class="line"><span class="cl">    <span class="c1"># label</span>
</span></span><span class="line"><span class="cl">    <span class="nf">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">X</span><span class="o">$</span><span class="n">start[e]</span> <span class="o">+</span> <span class="p">((</span><span class="n">X</span><span class="o">$</span><span class="n">end[e]</span> <span class="o">-</span> <span class="n">X</span><span class="o">$</span><span class="n">start[e]</span><span class="p">)</span> <span class="o">/</span> <span class="m">2</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">         <span class="n">y</span> <span class="o">=</span> <span class="m">16.5</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">X</span><span class="o">$</span><span class="n">labels[e]</span><span class="p">,</span> <span class="n">cex</span> <span class="o">=</span> <span class="m">3.3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">         <span class="n">col</span> <span class="o">=</span> <span class="nf">adjustcolor</span><span class="p">(</span><span class="n">X</span><span class="o">$</span><span class="n">colors[e]</span><span class="p">,</span> <span class="m">0.6</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># line</span>
</span></span><span class="line"><span class="cl">    <span class="nf">lines</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">X</span><span class="o">$</span><span class="n">start[e]</span><span class="p">,</span> <span class="n">X</span><span class="o">$</span><span class="n">end[e]</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">14.5</span><span class="p">,</span> <span class="m">14.5</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">          <span class="n">lwd</span> <span class="o">=</span> <span class="m">6</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="nf">adjustcolor</span><span class="p">(</span><span class="s">&#34;gray50&#34;</span><span class="p">,</span> <span class="m">0.3</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># save call</span>
</span></span><span class="line"><span class="cl"><span class="n">ann_cl</span> <span class="o">&lt;-</span> <span class="nf">call</span><span class="p">(</span><span class="s">&#34;ann_fun&#34;</span><span class="p">,</span> <span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">st</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create annotated dynamic spectrogram</span>
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">hs_wren</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.2</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">18.6</span><span class="p">),</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">width</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">500</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-100</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> <span class="n">speed</span> <span class="o">=</span> <span class="m">0.5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">spectro.call</span> <span class="o">=</span> <span class="n">ann_cl</span><span class="p">,</span> <span class="n">fps</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;../viridis_annotated.mp4&#34;</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>Finally, the argument ‘annotation.call’ can be used to add static labels
(i.e. non-scrolling). It works similar to ‘spectro.call’, but requires a
call from <code>text()</code>. This let users customize things as size, color,
position, font, and additional arguments taken by <code>text()</code>. The call
should also include the argmuents ‘start’ and ‘end’ to indicate the time
at which the labels are displayed (in s). ‘fading’ is optional and
allows fade-in and fade-out effects on labels (in s as well). The
following code downloads a recording containing several frog species
recorded in Costa Rica from figshare, cuts a clip including two species
and labels it with a single label:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># read data from figshare</span>
</span></span><span class="line"><span class="cl"><span class="n">frogs</span> <span class="o">&lt;-</span> <span class="nf">read_wave</span><span class="p">(</span><span class="s">&#34;https://ndownloader.figshare.com/files/22829075&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># cut a couple of species</span>
</span></span><span class="line"><span class="cl"><span class="n">shrt_frgs</span> <span class="o">&lt;-</span> <span class="nf">cutw</span><span class="p">(</span><span class="n">frogs</span><span class="p">,</span> <span class="n">from</span> <span class="o">=</span> <span class="m">35.3</span><span class="p">,</span> <span class="n">to</span> <span class="o">=</span> <span class="m">50.5</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="s">&#34;Wave&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># make annotation call</span>
</span></span><span class="line"><span class="cl"><span class="n">ann_cll</span> <span class="o">&lt;-</span> <span class="nf">call</span><span class="p">(</span><span class="s">&#34;text&#34;</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">0.25</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">0.87</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                <span class="n">labels</span> <span class="o">=</span> <span class="s">&#34;Frog calls&#34;</span><span class="p">,</span> <span class="n">cex</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="m">0.2</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="m">14</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                <span class="n">col</span> <span class="o">=</span> <span class="s">&#34;#FFEA46CC&#34;</span><span class="p">,</span> <span class="n">font</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">fading</span> <span class="o">=</span> <span class="m">0.6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create dynamic spectro</span>
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">shrt_frgs</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">512</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">                  <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.1</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">cividis</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">5.5</span><span class="p">),</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">width</span> <span class="o">=</span> <span class="m">1200</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">550</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-40</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="n">lcol</span> <span class="o">=</span>  <span class="s">&#34;#FFFFFFCC&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">colbg</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span> <span class="n">fps</span> <span class="o">=</span> <span class="m">60</span><span class="p">,</span> <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;../frogs.mp4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">osc</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">height.prop</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> <span class="n">colwave</span> <span class="o">=</span> <span class="s">&#34;#31688E&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">lty</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">annotation.call</span> <span class="o">=</span> <span class="n">ann_cll</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<p>The argument accepts more than one labels as in a regular <code>text()</code> call.
In that case ‘start’ and ‘end’ values should be supplied for each label:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># make annotation call for 2 annotations</span>
</span></span><span class="line"><span class="cl"><span class="n">ann_cll</span> <span class="o">&lt;-</span> <span class="nf">call</span><span class="p">(</span><span class="s">&#34;text&#34;</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">0.25</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">0.87</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                <span class="n">labels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;Dendropsophus ebraccatus&#34;</span><span class="p">,</span> <span class="s">&#34;Eleutherodactylus coqui&#34;</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">cex</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0.4</span><span class="p">,</span> <span class="m">7</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">end</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">5.5</span><span class="p">,</span> <span class="m">14.8</span><span class="p">),</span> <span class="n">col</span> <span class="o">=</span> <span class="s">&#34;#FFEA46CC&#34;</span><span class="p">,</span> <span class="n">font</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">fading</span> <span class="o">=</span> <span class="m">0.6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create dynamic spectro</span>
</span></span><span class="line"><span class="cl"><span class="nf">scrolling_spectro</span><span class="p">(</span><span class="n">wave</span> <span class="o">=</span> <span class="n">shrt_frgs</span><span class="p">,</span> <span class="n">wl</span> <span class="o">=</span> <span class="m">512</span><span class="p">,</span> <span class="n">ovlp</span> <span class="o">=</span> <span class="m">95</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">                  <span class="n">t.display</span> <span class="o">=</span> <span class="m">1.1</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="n">cividis</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">grid</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">flim</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">5.5</span><span class="p">),</span> <span class="n">loop</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">width</span> <span class="o">=</span> <span class="m">1200</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">550</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="m">200</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">collevels</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">-40</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="n">lcol</span> <span class="o">=</span>  <span class="s">&#34;#FFFFFFCC&#34;</span><span class="p">,</span> <span class="n">colbg</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">fps</span> <span class="o">=</span> <span class="m">60</span><span class="p">,</span> <span class="n">file.name</span> <span class="o">=</span> <span class="s">&#34;../frogs_sp_labels.mp4&#34;</span><span class="p">,</span> <span class="n">osc</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">height.prop</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span><span class="n">colwave</span> <span class="o">=</span> <span class="s">&#34;#31688E&#34;</span><span class="p">,</span> <span class="n">lty</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                  <span class="n">annotation.call</span> <span class="o">=</span> <span class="n">ann_cll</span><span class="p">)</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p> </p>
<hr>
<p>Please cite <a href="https://marce10.github.io/dynaSpec">dynaSpec</a> as follows:</p>
<p>Araya-Salas M. (2020), <em>dynaSpec: dynamic spectrogram visualizations in
R</em>. R package version 1.0.0.</p>
<hr>
<p><!-- raw HTML omitted -->Session information<!-- raw HTML omitted --></p>
<pre><code>## R version 4.3.2 (2023-10-31)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 22.04.2 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0 
## LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0
## 
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
## 
## time zone: America/Costa_Rica
## tzcode source: system (glibc)
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] warbleR_1.1.30     NatureSounds_1.0.4 knitr_1.45         seewave_2.2.3     
## [5] tuneR_1.4.6       
## 
## loaded via a namespace (and not attached):
##  [1] cli_3.6.2         rlang_1.1.3       xfun_0.41         jsonlite_1.8.8   
##  [5] rjson_0.2.21      RCurl_1.98-1.14   dtw_1.23-1        fftw_1.0-8       
##  [9] htmltools_0.5.7   brio_1.1.4        rmarkdown_2.25    evaluate_0.23    
## [13] MASS_7.3-55       bitops_1.0-7      fastmap_1.1.1     yaml_2.3.8       
## [17] compiler_4.3.2    Rcpp_1.0.12       testthat_3.2.1    pbapply_1.7-2    
## [21] rstudioapi_0.15.0 digest_0.6.34     R6_2.5.1          signal_1.8-0     
## [25] parallel_4.3.2    magrittr_2.0.3    tools_4.3.2       proxy_0.4-27
</code></pre>


        
          <div class="blog-tags">
            
              <a href="marce10.github.io/coded_bioacustics//tags/video/">video</a>&nbsp;
            
              <a href="marce10.github.io/coded_bioacustics//tags/visualization/">visualization</a>&nbsp;
            
              <a href="marce10.github.io/coded_bioacustics//tags/r/">R</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2020-05-28-dynaspec_dynamic_spectrograms_in_r%2f&amp;text=dynaSpec%3a%20dynamic%20spectrograms%20in%20R&amp;via=username" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=marce10.github.io%2fcoded_bioacustics%2fpost%2f2020-05-28-dynaspec_dynamic_spectrograms_in_r%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2020-05-28-dynaspec_dynamic_spectrograms_in_r%2f&amp;title=dynaSpec%3a%20dynamic%20spectrograms%20in%20R" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2020-05-28-dynaspec_dynamic_spectrograms_in_r%2f&amp;title=dynaSpec%3a%20dynamic%20spectrograms%20in%20R" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2020-05-28-dynaspec_dynamic_spectrograms_in_r%2f&amp;title=dynaSpec%3a%20dynamic%20spectrograms%20in%20R" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=marce10.github.io%2fcoded_bioacustics%2fpost%2f2020-05-28-dynaspec_dynamic_spectrograms_in_r%2f&amp;description=dynaSpec%3a%20dynamic%20spectrograms%20in%20R" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          
            
          

          
                  <h4 class="see-also">See also</h4>
                  <ul>
                
                
                    <li><a href="marce10.github.io/coded_bioacustics/post/2020-05-26-editing_wave_objects_from_extended_selection_tables/">Editing wave objects from extended selection tables</a></li>
                
                    <li><a href="marce10.github.io/coded_bioacustics/post/2020-06-15-automatic_signal_detection_a_case_study/">Automatic signal detection: a case study</a></li>
                
                    <li><a href="marce10.github.io/coded_bioacustics/post/2020-03-15-leaflet_xcmaps/">Interactive maps from Xeno-Canto recording localities in xc_maps()</a></li>
                
                    <li><a href="marce10.github.io/coded_bioacustics/post/2020-04-10-signal_detection_warbler_vs_monitor/">Signal detection with cross-correlation using warbleR</a></li>
                
                    <li><a href="marce10.github.io/coded_bioacustics/post/2019-01-12-selection_table_vs_template_xcorr/">Compare signals from selection tables to a set of templates using cross-correlation</a></li>
                
              </ul>

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="marce10.github.io/coded_bioacustics/post/2020-05-26-editing_wave_objects_from_extended_selection_tables/" data-toggle="tooltip" data-placement="top" title="Editing wave objects from extended selection tables">&larr; Previous Post</a>
            </li>
          
          
        </ul>
      


      
        
          
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "maRce_10" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
          
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
		
		  <a href="mailto:youremail@domain.com" title="Email me">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.facebook.com/username" title="Facebook">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://github.com/username" title="GitHub">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://gitlab.com/username" title="GitLab">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-gitlab fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://bitbucket.org/username" title="Bitbucket">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-bitbucket fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://twitter.com/username" title="Twitter">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://username.slack.com/" title="Slack">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-slack fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://reddit.com/u/username" title="Reddit">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-reddit-alien fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://linkedin.com/in/username" title="LinkedIn">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.xing.com/profile/username" title="Xing">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-xing fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://stackoverflow.com/users/XXXXXXX/username" title="StackOverflow">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.snapchat.com/add/username" title="Snapchat">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-snapchat-ghost fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.instagram.com/username" title="Instagram">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.youtube.com/user/username" title="Youtube">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://soundcloud.com/username" title="SoundCloud">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-soundcloud fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://open.spotify.com/user/username" title="Spotify">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-spotify fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://username.bandcamp.com/" title="Bandcamp">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-bandcamp fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://itch.io/profile/username" title="Itch.io">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-gamepad fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://vk.com/username" title="VK">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-vk fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://paypal.me/username" title="PayPal">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-paypal fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://telegram.me/username" title="Telegram">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-telegram fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://500px.com/username" title="500px">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-500px fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://codepen.io/username" title="CodePen">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-codepen fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.kaggle.com/username" title="kaggle">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-kaggle fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a rel="me"href="https://url" title="Mastodon">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-mastodon fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://weibo.com/username" title="Weibo">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-weibo fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://medium.com/@username" title="Medium">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-medium fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://discord.gg/invite%20code%20%28https://discord.gg/XXXXXXX%29" title="Discord">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-discord fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.strava.com/athletes/userid" title="Strava">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-strava fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="yourwebsite.com">Some Person</a>
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="marce10.github.io/coded_bioacustics/">Coded bioacoustics</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.121.2</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="marce10.github.io/coded_bioacustics/js/main.js"></script>
<script src="marce10.github.io/coded_bioacustics/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="marce10.github.io/coded_bioacustics/js/load-photoswipe.js"></script>









    
        
  </body>
</html>

